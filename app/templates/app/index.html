{% extends 'app/base.html' %}

{% block container %}
  <div class="row">
    <div ng-controller="ModelListController" class="col-md-offset-2 col-md-2" id="model_list">
      <h2>Модели</h2>
      <ul class="list-group">
        <li class="list-group-item" ng-repeat="model in models">
          <a href="#/{$ model.name $}/" ng-click="show_objects_of(model)">{$ model.title $}</a>
        </li>
      </ul>
    </div>
    <div ng-controller="ObjectsController" class="col-md-6" id="object_list">
      <h2>Объекты</h2>
      <div id="/{$ current_model.name $}/" class="panel panel-default" ng-show="current_model">
        <div class="panel-heading">{$ current_model.title $}</div>
        <form>
          <table class="table">
            <tr>
              <th ng-repeat="field in fields_for(current_model)">
                {$ field.title $}
              </th>
            </tr>
            <tr ng-repeat="object in objects">
              <td ng-repeat="field in fields_for(current_model)">{$ object[field.id] $}</td>
              <td></td>
            </tr>
            <tr>
              <td ng-repeat="field in fields_for(current_model)">
                <input name="{$ field.id $}" type="{$ input_types_mapping[field.type] $}" ng-model="new_object[field.id]">
              </td>
              <td>
                <button type="submit" ng-click="new_object_save()">Создать</button>
              </td>
            </tr>
          </table>
        </form>
      </div>
    </div>
  </div>
{% endblock container %}
